<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd"
    >
    <bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>

    <bean id="xmlViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
        <property name="location"><value>/WEB-INF/special-views.xml</value></property>
    </bean>

    <bean id="irViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass">
            <value>org.springframework.web.servlet.view.InternalResourceView</value>
        </property>
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

  
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" lazy-init="true">
        <property name="interceptors">
            <list>
                <!--<ref bean="loginCheckInterceptor"/>-->
                <ref bean="sectionInterceptor"/>
            </list>
        </property>
    </bean>
    
    <bean id="urlResolver" class="gov.nih.nci.cabig.caaers.tools.spring.BeanNameControllerUrlResolver">
        <property name="servletName"><value>pages</value></property>
    </bean>

    <bean id="loginCheckInterceptor" class="gov.nih.nci.cabig.caaers.tools.accesscontrol.LoginCheckInterceptor"/>

    <bean id="sectionInterceptor" class="gov.nih.nci.cabig.caaers.web.SectionInterceptor">
        <property name="sections">
            <list>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType">
                    <property name="displayName"><value>Adverse Events</value></property>
                    <property name="pathMapping"><value>/ae/**</value></property>
                    <property name="mainController"><value>createAdverseEventController</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType">
                                <property name="displayName"><value>Enter AE</value></property>
                                <property name="linkName"><value>createAdverseEventController</value></property>
                            </bean>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType">
                                <property name="displayName"><value>List AEs</value></property>
                                <property name="linkName"><value>listAdverseEventsController</value></property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType">
                    <property name="displayName"><value>Studies</value></property>
                    <property name="pathMapping"><value>/study/**</value></property>
                    <property name="mainController"><value>createStudyController</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType">
                                <property name="displayName"><value>Create Study</value></property>
                                <property name="linkName"><value>createStudyController</value></property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType">
                    <property name="displayName"><value>Participants</value></property>
                    <property name="pathMapping"><value>/participant/**</value></property>
                    <property name="mainController"><value>createParticipantController</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType">
                                <property name="displayName"><value>Create Participant</value></property>
                                <property name="linkName"><value>createParticipantController</value></property>
                            </bean>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType">
                                <property name="displayName"><value>Assign Participants to Studies</value></property>
                                <property name="linkName"><value>assignController</value></property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType">
                    <property name="displayName"><value>Reports</value></property>
                    <property name="pathMapping"><value>/report/**</value></property>
                    <property name="mainController"><value>reportsNotImplementedController</value></property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType">
                    <property name="displayName"><value>Administration</value></property>
                    <property name="pathMapping"><value>/admin/**</value></property>
                    <property name="mainController"><value>adminNotImplementedController</value></property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="noCacheTemplate" abstract="true">
        <property name="cacheSeconds"><value>0</value></property>
    </bean>
    
    <bean id="listValues" class="gov.nih.nci.cabig.caaers.web.ListValues" autowire="byName"/>
    
    <!--  PARTICIPANT   -->
    <bean name="/participant/create" id="createParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.CreateParticipantController" >
    </bean>
    
    <bean name="/participant/view" id="viewParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.ViewParticipantController" >
    </bean>    
    
    <bean name="/participant/assign" id="assignController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignController" >
  	</bean>
    
    <bean name="/participant/assignStudy" id="assignStudyController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignStudyController" >
    </bean>
    
    <bean name="/participant/assignParticipant" id="assignParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignParticipantController" >
    </bean>
    
    <bean name="/study/create" id="createStudyController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.CreateStudyController">  
	</bean>

	<bean name="/study/view" id="viewStudyController" autowire="byType"
    	  class="gov.nih.nci.cabig.caaers.web.ViewStudyController" >
    </bean>
    
    <!-- <bean id="loginCommand" class="gov.nih.nci.cabig.caaers.web.LoginCommand" autowire="byName" scope="prototype" />
    
    <bean name="/login" id="loginController" autowire="byName"
        class="gov.nih.nci.cabig.caaers.web.LoginController" lazy-init="true">
        <property name="targetView"><value>welcome</value></property>
    </bean> -->

    <bean name="/ae/create" id="createAdverseEventController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.CreateAdverseEventController"/>

    <bean name="/ae/edit" id="editAdverseEventController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.EditAdverseEventController"/>

    <bean name="/ae/list" id="listAdverseEventsController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.ListAdverseEventsController"/>

    <bean name="/help" id="helpController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/ae/notImplemented" id="aesNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/study/notImplemented" id="studiesNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/participant/notImplemented" id="participantsNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/report/notImplemented" id="reportsNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/admin/notImplemented" id="adminNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/ae/sample" autowire="byType" class="gov.nih.nci.cabig.caaers.web.SampleController"/>
</beans>