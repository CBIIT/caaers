<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd"
    >
    
    <bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>

    <bean id="xmlViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
        <property name="location"><value>/WEB-INF/special-views.xml</value></property>
    </bean>

    <bean id="irViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:viewClass="org.springframework.web.servlet.view.InternalResourceView"
        p:prefix="/WEB-INF/views/" p:suffix=".jsp"/>
  
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" lazy-init="true">
        <property name="interceptors">
            <list>
            <!--
                <ref bean="loginCheckInterceptor"/>
                -->
                <ref bean="sectionInterceptor"/>
            </list>
        </property>
    </bean>
    
    <bean id="urlResolver" class="gov.nih.nci.cabig.caaers.tools.spring.BeanNameControllerUrlResolver">
        <property name="servletName"><value>pages</value></property>
    </bean>

    <bean id="sectionInterceptor" class="gov.nih.nci.cabig.caaers.web.SectionInterceptor">
        <property name="sections">
            <list>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Adverse Events" p:mainController="listAdverseEventsController">
                    <property name="pathMapping"><value>/ae/**</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Enter AE report" p:linkName="createAdverseEventController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="List AEs" p:linkName="listAdverseEventsController"/>
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Studies" p:mainController="searchStudyController">
                    <property name="pathMapping"><value>/study/**</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Study" p:linkName="createStudyController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Search Study" p:linkName="searchStudyController"/>                         
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Participants" p:mainController="createParticipantController">
                    <property name="pathMapping"><value>/participant/**</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Participant" p:linkName="createParticipantController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Assign Participants to Studies" p:linkName="assignController"/>
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Reports" p:mainController="reportsNotImplementedController">
                    <property name="pathMapping"><value>/report/**</value></property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Rules" p:mainController="createRuleController">
                    <property name="pathMapping"><value>/rule/**</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Rule" p:linkName="createRuleController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="List Rules" p:linkName="listRuleController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Deploy Rules" p:linkName="deployRuleController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Notification" p:linkName="createNotificationController"/> 
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="List Notifications" p:linkName="listNotificationController"/>                                
                        </list>
                    </property>
                </bean>
                <bean class="gov.nih.nci.cabig.caaers.web.chrome.Section" autowire="byType"
                    p:displayName="Administration" p:mainController="configurationController">
                    <property name="pathMapping"><value>/admin/**</value></property>
                    <property name="tasks">
                        <list>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Configure caAERS" p:linkName="configurationController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Investigator" p:linkName="createInvestigatorController"/>            
							<bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Create Research Staff" p:linkName="createResearchStaffController"/>
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Import" p:linkName="importController"/> 
                            <bean class="gov.nih.nci.cabig.caaers.web.chrome.Task" autowire="byType"
                                p:displayName="Import MedDRA" p:linkName="importMeddraController"/>                                                                               
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="noCacheTemplate" abstract="true">
        <property name="cacheSeconds"><value>0</value></property>
    </bean>

    <bean id="listValues" class="gov.nih.nci.cabig.caaers.web.ListValues" autowire="byName"/>

    <bean id="tabConfigurer" class="gov.nih.nci.cabig.ctms.web.tabs.DefaultTabConfigurer"/>

    <!--  PARTICIPANT   -->
    <bean name="/participant/create" id="createParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.CreateParticipantController" >
    </bean>

    <bean name="/participant/view" id="viewParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.ViewParticipantController" >
    </bean>

    <bean name="/participant/assign" id="assignController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignController" >
    	  <property name="sessionForm"><value>true</value></property>
  	</bean>

    <bean name="/participant/assignStudy" id="assignStudyController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignStudyController" >
    </bean>

    <bean name="/participant/assignParticipant" id="assignParticipantController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.participant.AssignParticipantController" >
    </bean>

    <bean name="/study/create" id="createStudyController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.study.CreateStudyController">
	</bean>
	
	<bean name="/study/view" id="viewStudyController" autowire="byType"
    	  class="gov.nih.nci.cabig.caaers.web.ViewStudyController" >
    </bean>
    
    <bean name="/study/search" id="searchStudyController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.SearchStudyController">
	</bean>
	
	<bean name="/study/edit" id="editStudyController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.study.EditStudyController">
	</bean>    

    <bean name="/ae/create" id="createAdverseEventController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.CreateAdverseEventController"/>

    <bean name="/ae/edit" id="editAdverseEventController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.EditAdverseEventController"/>

    <bean name="/ae/list" id="listAdverseEventsController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.ae.ListAdverseEventsController"/>

    <bean name="/admin/configure" id="configurationController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.admin.ConfigurationController"/>

	<bean name="/admin/createInvestigator" id="createInvestigatorController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.admin.CreateInvestigatorController"/>
          
    <bean name="/admin/import" id="importController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.admin.ImportController"/>
          
    <bean name="/admin/importMeddra" id="importMeddraController" autowire="byName"
    	  class="gov.nih.nci.cabig.caaers.web.admin.ImportMeddraController" >
    </bean>            

	<bean name="/admin/viewInvestigator" id="viewInvestigatorController" autowire="byType"
    	  class="gov.nih.nci.cabig.caaers.web.admin.ViewInvestigatorController" >
    </bean>
    
    <bean name="/admin/createResearchStaff" id="createResearchStaffController" autowire="byType"
          class="gov.nih.nci.cabig.caaers.web.admin.CreateResearchStaffController"/>

	<bean name="/admin/viewResearchStaff" id="viewResearchStaffController" autowire="byType"
    	  class="gov.nih.nci.cabig.caaers.web.admin.ViewResearchStaffController" >
    </bean>
    

    <bean name="/help" id="helpController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/ae/notImplemented" id="aesNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/study/notImplemented" id="studiesNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/participant/notImplemented" id="participantsNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/report/notImplemented" id="reportsNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/admin/notImplemented" id="adminNotImplementedController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>standardNotImplemented</value></property>
    </bean>

    <bean name="/ae/sample" autowire="byType" class="gov.nih.nci.cabig.caaers.web.SampleController"/>

    <bean name="/rule/create" id="createRuleController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.rule.author.CreateRuleController">
    </bean>

    <bean name="/rule/list" id="listRuleController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.rule.author.ListRuleController">
    </bean>

    <bean name="/rule/addRule" id="addRuleController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>rule/author/addRule</value></property>
    </bean>
    
    <bean name="/rule/addColumn" id="addRuleConditionController" autowire="byType"
        class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>rule/author/addColumn</value></property>
    </bean>    

    <bean name="/rule/notification/create" id="createNotificationController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.rule.notification.NotificationController">
        <property name="allRoles">
        	<list>
        		<value>Sponsor</value>
        		<value>IRB</value>
        	</list>
        </property>
        <property name="map">
            <map>       
              <entry key="Sponsor">
                    <list>
                        <value>vtsujith@gmail.com</value>
                    </list>
              </entry>
              <entry key="IRB">
                    <list>
                        <value>vtsujith@yahoo.co.uk</value>
                    </list>
              </entry>
	        </map>
        </property>
    </bean>

    <bean name="/rule/notification/list" id="listNotificationController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.rule.notification.ListNotificationController">
    </bean>
    
    <bean name="/rule/deploy" id="deployRuleController" autowire="byType"
        class="gov.nih.nci.cabig.caaers.web.rule.deploy.DeployRuleController">
    </bean>
    
     
</beans>