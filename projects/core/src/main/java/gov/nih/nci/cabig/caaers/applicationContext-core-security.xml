<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">


	<bean id="csmUserProvisioningManager"
		class="gov.nih.nci.security.acegi.csm.authorization.UserProvisioningManagerFactory"
		factory-method="newUserProvisioningManager">
		<constructor-arg value="caaers" />
		<constructor-arg>
			<!--
			<bean class="org.springframework.beans.factory.config.PropertiesFactoryBean">
				<property name="locations" value="classpath:/hibernate.properties"/>
			</bean>
			-->
			<map>
				<entry>
					<key>
						<value>hibernate.connection.url</value>
					</key>
					<value>${datasource.url}</value>
				</entry>
				<entry>
					<key>
						<value>hibernate.connection.username</value>
					</key>
					<value>${datasource.username}</value>
				</entry>
				<entry>
					<key>
						<value>hibernate.connection.password</value>
					</key>
					<value>${datasource.password}</value>
				</entry>
				<entry>
					<key>
						<value>hibernate.dialect</value>
					</key>
					<value>${datasource.dialect}</value>
				</entry>
				<entry>
					<key>
						<value>hibernate.connection.driver_class</value>
					</key>
					<value>${datasource.driver}</value>
				</entry>
			</map>
		</constructor-arg>
	</bean>

	<bean id="csmAuthenticationManager"
		class="gov.nih.nci.security.SecurityServiceProvider"
		factory-method="getAuthenticationManager">
		<constructor-arg value="caaers" />
	</bean>

	<bean id="csmObjectIdGenerator"
		class="gov.nih.nci.security.acegi.csm.authorization.BasicCSMObjectIdGenerator">
		<property name="idMethodName" value="getId" />
		<property name="classNameFirst" value="true" />
		<property name="separator" value=":" />
	</bean>

	<bean id="csmExtentIdGenerator"
		class="gov.nih.nci.security.acegi.csm.authorization.BasicCSMObjectIdGenerator" />

	<bean id="daoSecurityTemplate" abstract="true">

		<property name="authenticationManager" ref="authenticationManager"/>

	</bean>

</beans>