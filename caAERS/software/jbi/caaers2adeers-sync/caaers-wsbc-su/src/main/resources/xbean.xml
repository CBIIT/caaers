<?xml version="1.0" encoding="UTF-8"?>
<!-- Generated by Apache ServiceMix Archetype -->
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:cxfbc="http://servicemix.apache.org/cxfbc/1.0" 
    xmlns:caaers="http://schema.integration.caaers.cabig.nci.nih.gov/common"
    xmlns:stud="http://schema.integration.caaers.cabig.nci.nih.gov/study"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://servicemix.apache.org/cxfbc/1.0 http://servicemix.apache.org/schema/servicemix-cxfbc-2011.02.xsd
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <!-- 
        A provider endpoint is a client side JBI endpoint which can receive requests from the NMR and send
        them to a given URL where the service is provided.
        
        Attributes:
            wsdl                    : the WSDL will be retrieved from the given location
            service                 : the service name of the exposed endpoint
            endpoint                : the endpoint name of the exposed endpoint
            interfaceName           : the interface name of the exposed endpoint
            locationURI             : the HTTP URL of the target service (external)
            bugCfg                  : the Spring configuration file used for CXF bus initialization
            mtomEnabled             : enable MTOM/attachment support
            useJBIWrapper           : specifies if the endpoint expects messages to use the JBI wrapper for SOAP messages
            useSOAPEnvelope         : specifies if the endpoint expects SOAP messages when useJBIWrapper is false
            schemaValidationEnabled : specifies if the endpoint use schema validation for the incoming/outgoing message
            properties              : sets arbitrary properties that are added to the CXF content at endpoint level
    -->

    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:caxchange.properties</value>
        </property>
        <property name="placeholderPrefix"><value>s[</value></property>
        <property name="placeholderSuffix"><value>]</value></property>
        <property name="ignoreResourceNotFound"><value>true</value></property>
        <property name="ignoreUnresolvablePlaceholders"><value>true</value></property>
    </bean>
    <bean id="caaersWSPasswordCallback" class="gov.nih.nci.cabig.caaers2adeers.CaaersWSPasswordCallback">
        <property name="caaersWSUser" value="s[CAAERS_WS_USERNAME]" />
        <property name="caaersWSPassword" value="s[CAAERS_WS_PASSWORD]" />
        <property name="adeersWSUser" value="s[ADEERS_WS_USERNAME]" />
        <property name="adeersWSPassword" value="s[ADEERS_WS_PASSWORD]" />
    </bean>
    <bean id="wss4jOutInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor">
        <constructor-arg>
            <map>
                <entry key="action" value="UsernameToken"/>
                <entry key="user" value="s[CAAERS_WS_USERNAME]"/>
                <entry key="passwordType" value="PasswordText"/>
                <entry key="mustUnderstand" value="false"/>
                <entry key="Type" value="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
                <entry key="passwordCallbackRef">
                    <ref local="caaersWSPasswordCallback" />
                </entry>
            </map>
        </constructor-arg>
    </bean>
    
    <bean id="wss4jInInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
        <constructor-arg>
            <map>
                <entry key="action" value="UsernameToken"/>
                <entry key="user" value="s[CAAERS_WS_USERNAME]"/>
                <entry key="passwordType" value="PasswordText"/>
                <entry key="Type" value="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText"/>
                <entry key="passwordCallbackRef">
                    <ref local="caaersWSPasswordCallback" />
                </entry>
            </map>
        </constructor-arg>
    </bean>

   <!-- ================== Agents Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:AgentManagementServiceInterface"  service="caaers:AgentManagementWebService"
                    endpoint="AgentManagementWebServiceImplPort"
			wsdl="classpath:AgentService.wsdl" 
			locationURI="s[AGENT_WS_BINDING_URL]" useJBIWrapper="false"
            useSOAPEnvelope="true" schemaValidationEnabled="true">
		<cxfbc:inInterceptors>
		  <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
		</cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
		<cxfbc:inFaultInterceptors>
		  <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
		</cxfbc:inFaultInterceptors>
		<cxfbc:outFaultInterceptors>
		  <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
		</cxfbc:outFaultInterceptors>
	</cxfbc:provider>

    <!-- ================== ASAEL Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:ASAELServiceInterface"  service="caaers:ASAELService"
                    endpoint="ASAELWebServicePort"
                    wsdl="classpath:ASAELService.wsdl"
                    locationURI="s[ASAEL_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>


    <!-- ================== Device Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:DevicesServiceInterface"  service="caaers:DevicesService"
                    endpoint="DevicesWebServicePort"
                    wsdl="classpath:DevicesService.wsdl"
                    locationURI="s[DEVICE_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>


    <!-- ================== Organization Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:OrganizationServiceInterface"
                    service="caaers:OrganizationManagementWebService"
                    endpoint="OrganizationManagementWebServiceImplPort"
                    wsdl="classpath:OrganizationService.wsdl"
                    locationURI="s[ORGANIZATION_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>

    <!-- ================== PreExisting Condition Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:PreExistingConditionServiceInterface"
                    service="caaers:PreExistingConditionManagementWebService"
                    endpoint="PreExistingConditionManagementWebServiceImplPort"
                    wsdl="classpath:PreExistingConditionLOVService.wsdl"
                    locationURI="s[PRE_CONDITION_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>

    <!-- ================== PriorTherapy Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="caaers:PriorTherapyServiceInterface"  service="caaers:PriorTherapyManagementWebService"
                    endpoint="PriorTherapyManagementWebServiceImplPort"
                    wsdl="classpath:PriorTherapyLOVService.wsdl"
                    locationURI="s[PRIOR_THERAPY_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>

    <!-- ================== Study Webservice Provider ==================================-->
    <cxfbc:provider interfaceName="stud:StudyProcessorInterface"  service="stud:StudyService"
                    endpoint="StudyManagementWebServicePort"
                    wsdl="classpath:StudyService.wsdl"
                    locationURI="s[STUDY_WS_BINDING_URL]" useJBIWrapper="false"
                    useSOAPEnvelope="true" schemaValidationEnabled="true">
        <cxfbc:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inInterceptors>
        <cxfbc:outInterceptors>
            <ref local="wss4jOutInterceptor" />
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outInterceptors>
        <cxfbc:inFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </cxfbc:inFaultInterceptors>
        <cxfbc:outFaultInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </cxfbc:outFaultInterceptors>
    </cxfbc:provider>

    <!-- ================== GenericProcessor Webservice Consumer ==================================-->
    <cxfbc:consumer wsdl="classpath:GenericProcessor.wsdl"
                      endpoint="GenericProcessor"
                      useJBIWrapper="false"
                      locationURI="s[GENERIC_PROCESSOR_WS_BINDING_URL]"
                      targetService="caaers:generic-processor-sink"
                      busCfg="caXchangeConf/security/cxf-caaers-config.xml">
        <cxfbc:inInterceptors>
        	<bean class="gov.nih.nci.cabig.caaers2adeers.RemoveJbiJAASInterceptor"/>
            <ref local="wss4jInInterceptor" />
        </cxfbc:inInterceptors>
		<!--<cxfbc:inInterceptors>-->
		  <!--<bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>-->
		<!--</cxfbc:inInterceptors>-->
		<!--<cxfbc:outInterceptors>-->
		  <!--<bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>-->
		<!--</cxfbc:outInterceptors>-->
		<!--<cxfbc:inFaultInterceptors>-->
		  <!--<bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>-->
		<!--</cxfbc:inFaultInterceptors>-->
		<!--<cxfbc:outFaultInterceptors>-->
		  <!--<bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>-->
		<!--</cxfbc:outFaultInterceptors>-->

	</cxfbc:consumer>
	<!-- END SNIPPET: cxfbc-consumer -->
</beans>
