<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
			http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
			http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
			http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
			http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

  <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
    	<list>
    		<value>/WEB-INF/help</value>
    		<value>/WEB-INF/label</value>
            <value>/WEB-INF/error_messages</value>
			<value>/WEB-INF/service-messages</value>
			<value>service-messages</value>
    	</list>
    </property>
  </bean>
  <bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>
  <bean id="webBindingInitializer" class="gov.nih.nci.cabig.caaers.CaaersDataBindingInitializer" />
    <!-- =========================== View resolvers ====================================
-->
  <bean id="xmlViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="location"><value>/WEB-INF/special-views.xml</value></property>
  </bean>

  <bean id="irViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:viewClass="org.springframework.web.servlet.view.InternalResourceView"
        p:prefix="/WEB-INF/views/" p:suffix=".jsp"/>
  
  <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="10000000"/>
  </bean>    
  
  <bean id="urlMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" lazy-init="true">
    <property name="interceptors">
      <list>
	    <ref bean="stateInformationInterceptor"/>
		<ref bean="sectionInterceptor"/>
      </list>
    </property>
  </bean>
  
  <bean id="urlResolver" class="gov.nih.nci.cabig.ctms.tools.spring.BeanNameControllerUrlResolver">
    <property name="servletName"><value>pages</value></property>
  </bean>

  <!-- =============================== Custom Interceptors ===================================
-->
  <bean id="stateInformationInterceptor" class="gov.nih.nci.cabig.caaers.web.StateInfoInterceptor" />

  <bean id="sectionInterceptor" class="gov.nih.nci.cabig.ctms.web.chrome.SectionInterceptor">
      <property name="sections">
        <list>
          <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Adverse Events" p:mainController="aeModuleResolverController">
              <property name="pathMapping"><value>/ae/**</value></property>
              <property name="urlResolver" ref="urlResolver"/>

            <property name="tasks">
              <list>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Report Adverse Events" p:linkName="captureAdverseEventController"/>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Reports" p:linkName="listAdverseEventsController"/>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Routing and Review" p:linkName="routingAndReviewController"/>
              </list>
            </property>
      </bean>
      <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Studies" p:mainController="searchStudyController">
          <property name="pathMapping"><value>/study/**</value></property>
          <property name="urlResolver" ref="urlResolver"/>
        <property name="tasks">
          <list>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Study" p:linkName="createStudyController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Studies" p:linkName="searchStudyController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="NCI Studies" p:linkName="searchAdEERSStudyController"/>
          </list>
        </property>
      </bean>
      <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Subjects" p:mainController="searchParticipantController">
          <property name="pathMapping"><value>/participant/**</value></property>
          <property name="urlResolver" ref="urlResolver"/>
        <property name="tasks">
          <list>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Subject" p:linkName="createParticipantController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Subjects" p:linkName="searchParticipantController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Assign Subject to Study" p:linkName="assignParticipantController"/>
          </list>
        </property>
      </bean>

      <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Rules" p:mainController="listRuleController">
            <property name="pathMapping"><value>/rule/**</value></property>
            <property name="urlResolver" ref="urlResolver"/>
            <property name="tasks">
                <list>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Rules" p:linkName="listRuleController"/>
                    <!--<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Rules" p:linkName="createRuleController"/>-->
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Report Definitions" p:linkName="listNotificationController"/>
                    <!--<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Report Definition" p:linkName="createNotificationController"/>-->
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Safety Notifications" p:linkName="listSafetyNotificationController"/>
                    <!--<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Safety Notifications" p:linkName="createSafetyNotificationController"/>-->

                </list>
            </property>
      </bean>
      <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Administration" p:mainController="adminResolverController">
          <property name="pathMapping"><value>/admin/**</value></property>
          <property name="urlResolver" ref="urlResolver"/>
        <property name="tasks">
          <list>
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Configure caAERS" p:linkName="configurationController"/>
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Personnel" p:linkName="userSearchController"/>
<!--                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Investigator" p:linkName="searchInvestigatorController"/>-->
<!--                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Research Staff" p:linkName="searchResearchStaffController"/>-->
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Import" p:linkName="importController"/>
                  <!--
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType"
                  p:displayName="Import MedDRA" p:linkName="importMeddraController"/>
                  -->
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="IND#" p:linkName="searchINDController"/>
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Organization" p:linkName="searchOrganizationController"/>
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="System Integration" p:linkName="cTEPESYSDataImportController"/>
                <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Interventions" p:linkName="asaelSearchController"/>
                
          </list>
        </property>
      </bean>
      <bean class="gov.nih.nci.cabig.ctms.web.chrome.Section" p:displayName="Advanced Search" p:mainController="advancedSearchController">
              <property name="pathMapping"><value>/search/**</value></property>
              <property name="urlResolver" ref="urlResolver"/>
            <property name="tasks">
              <list>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Search" p:linkName="advancedSearchController"/>
                    <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Search" p:linkName="listSearchController"/>
              </list>
            </property>
      </bean>
        </list>
      </property>
    </bean>


    <!-- ===================== Task and Task Groups ===================================
-->
  <bean name="/task" id="taskController" class="gov.nih.nci.cabig.caaers.web.task.TaskController">
    <property name="taskGroups">
      <list>
            <ref bean="routineReportTaskGroup"/>
            <ref bean="studyTaskGroup"/>
            <ref bean="participantTaskGroup"/>

            <ref bean="administrationTaskGroup"/>
            <ref bean="userTaskGroup"/>
            <ref bean="reportCalendarTaskGroup"/>
            <ref bean="ruleTaskGroup"/>
          <!--<ref bean="medraTaskGroup"/>-->
          <!--<ref bean="advanceSearchTaskGroup"/>-->
          
          
      </list>
    </property>
  </bean>

  <bean id="advanceSearchTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Analysis and Review">
    <property name="taskList">
      <list>
        <!--<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Review AEs" p:linkName="adverseEventController"/>-->
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Review Expedited Reports" p:linkName="reportController"/>
        <!--<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Review Routine AEs" p:linkName="routineReportController"/>-->
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Studies" p:linkName="studyController"/>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Subjects" p:linkName="participantController"/>
      </list>
    </property>
  </bean>

  <bean id="routineReportTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Adverse Events">
    <property name="taskList">
      <list>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Report Adverse Events" p:linkName="captureAdverseEventController"/>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Reports" p:linkName="listAdverseEventsController"/>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Routing and Review" p:linkName="routingAndReviewController"/>
      </list>
    </property>
  </bean>

  <bean id="ruleTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Reporting Rules">
    <property name="taskList">
      <list>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Rules" p:linkName="listRuleController"/>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Rules" p:linkName="createRuleController"/>
      </list>
    </property>
  </bean>

  <bean id="reportCalendarTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Report Definitions">
    <property name="taskList">
      <list>
        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Report Definitions" p:linkName="listNotificationController"/>
		<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Report Definition" p:linkName="createNotificationController"/>
		<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Safety Notifications" p:linkName="listSafetyNotificationController"/>
		<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Safety Notifications" p:linkName="createSafetyNotificationController"/>
      </list>
    </property>
  </bean>

  <bean id="participantTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Subjects">
    <property name="taskList">
      <list>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Subject" p:linkName="createParticipantController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Subjects" p:linkName="searchParticipantController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Assign Subject to Study" p:linkName="assignParticipantController"/>
      </list>
    </property>
  </bean>

  <bean id="studyTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Studies">
    <property name="taskList">
      <list>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Study" p:linkName="createStudyController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Manage Studies" p:linkName="searchStudyController"/>
      </list>
    </property>
  </bean>

<!--
  <bean id="medraTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="AE Terminology">
    <property name="taskList">
      <list>
	        <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Import MedDRA" p:linkName="importMeddraController"/>
      </list>
    </property>
  </bean>
-->

  <bean id="userTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="User Management ">
    <property name="taskList">
      <list>
<!--            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Investigator Users" p:linkName="createInvestigatorController"/>-->
<!--            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Search Investigator" p:linkName="searchInvestigatorController"/>-->
<!--            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Research Staff Users" p:linkName="createResearchStaffController"/>-->
<!--            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Search Research Staff Users" p:linkName="searchResearchStaffController"/>-->
			<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Personnel" p:linkName="createUserController"/>
			<bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Search Personnel" p:linkName="userSearchController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Configure Password Policy" p:linkName="passwordPolicyConfigurationController"/>
      </list>
    </property>
  </bean>

  <bean id="administrationTaskGroup" class="gov.nih.nci.cabig.caaers.web.task.TaskGroup" p:displayName="Administration">
    <property name="taskList">
      <list>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Configure caAERS" p:linkName="configurationController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="System Integration" p:linkName="cTEPESYSDataImportController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Import" p:linkName="importController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Create Sites" p:linkName="createOrganizationController"/>
            <bean class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Search Sites" p:linkName="searchOrganizationController"/>
      </list>
    </property>
  </bean>

  <bean id="noCacheTemplate" abstract="true">
    <property name="cacheSeconds"><value>0</value></property>
  </bean>

  <bean id="listValues" class="gov.nih.nci.cabig.caaers.web.ListValues" autowire="byName"/>

  <bean id="tabConfigurer" class="gov.nih.nci.cabig.ctms.web.tabs.DefaultTabConfigurer"/>

  <bean id="importerFactory" class="gov.nih.nci.cabig.caaers.web.admin.ImporterFactory">
  	<property name="investigatorMigratorService" ref="investigatorMigratorService"/>
	<property name="researchStaffMigratorService" ref="researchStaffMigratorService"/>
  	<property name="studyProcessor" ref="studyProcessorImpl"/>
	<property name="participantService" ref="participantServiceImpl"/>
  	<property name="domainObjectValidator" ref="domainObjectValidator"/>
  	<property name="participantDao" ref="participantDao"></property>
  	<property name="studyRepository" ref="studyRepository"></property>
  	<property name="researchStaffRepository" ref="researchStaffRepository"></property>
  	<property name="investigatorRepository" ref="investigatorRepository"></property>
  	<property name="organizationRepository" ref="organizationRepository"></property>
  	<property name="agentRepository" ref="agentRepository"/>
  	<property name="medDRADao" ref="medDRADao"/>
  	<property name="meddraVersionDao" ref="meddraVersionDao" />
  	<property name="asaelImporter" ref="asaelImporter" />
  	<property name="messageSource" ref="messageSource" />
    <property name="eventFactory"  ref="eventFactory" />
  </bean>
    
  <!-- ============================== Section link - Task Mapping resolvers ====================================
-->
  <bean id="adminResolverController" name="/admin/adminResolverController" class="gov.nih.nci.cabig.caaers.web.TaskResolverController" autowire="byType">
  	<property name="objectPrivilegeMap" ref="taskObjectPrivilegeMap" />
  	<property name="caaersSecurityFacade" ref="caaersSecurityFacade" />
  	<property name="urls">
	    <list>
	    	<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/configure"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/passwordPolicyConfigure"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/mandatoryFields"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/import"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/searchIND"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/createIND"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/searchOrganization"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/createOrganization"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/ctepesysDataImport"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/trackReports"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/ctepesysDataIntegrationLogs"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/happy"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/asaelSearch"/>
    		</bean>
    		<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/asaelCreate"/>
    		</bean>
			<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/createUser"/>
    		</bean>
			<bean class="java.lang.String">
	    		<constructor-arg value="/pages/admin/searchUser"/>
    		</bean>
	    </list>
	</property>
  </bean> 

  <bean id="aeModuleResolverController" name="/ae/aeModuleResolverController" class="gov.nih.nci.cabig.caaers.web.TaskResolverController">
    <property name="objectPrivilegeMap" ref="taskObjectPrivilegeMap" />
  	<property name="caaersSecurityFacade" ref="caaersSecurityFacade" />
  	<property name="urls">
	    <list>
            <value>/pages/ae/list</value>
            <value>/pages/ae/captureRoutine</value>
            <value>/pages/ae/routingAndReview</value>
        </list>
     </property>
  </bean>
    
  <bean name="asaelImporter" class="gov.nih.nci.cabig.caaers.web.admin.ASAELImporter" autowire="byType"/>




  	<bean name="participantEditTask" id="participantEditTask" class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Subject" p:linkName="editParticipantController"/>
    <bean name="studyEditTask" id="studyEditTask" class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Enter Study" p:linkName="editStudyController"/>
    <bean name="aeEditTask" id="aeEditTask" class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Report Adverse Events" p:linkName="editAdverseEventController"/>
    <bean name="aeCreateTask" id="aeCreateTask" class="gov.nih.nci.cabig.ctms.web.chrome.Task" autowire="byType" p:displayName="Report Adverse Events" p:linkName="createAdverseEventController"/>

    <!--  PARTICIPANT   -->
    <bean name="/participant/create" id="createParticipantController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.participant.CreateParticipantController" >
        <property name="webControllerValidator" ref="webControllerValidator"/>
    </bean>

  <bean name="/participant/edit" id="editParticipantController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.participant.EditParticipantController" p:task-ref="participantEditTask">
    <property name="webControllerValidator" ref="webControllerValidator"/>
  </bean>

  <bean name="/participant/view" id="viewParticipantController" autowire="byName" class="gov.nih.nci.cabig.caaers.web.participant.ViewParticipantController" >
  </bean>
  
  <bean name="/participant/assignParticipant" id="assignParticipantController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.participant.AssignParticipantController" />
  
  <!--  For InPlaceEditor  -->
<!--
  <bean name="/study/inPlaceEdit" id="inPlaceEditController" autowire="byType"
	class="gov.nih.nci.cabig.caaers.web.InPlaceEditorController">
  </bean>
-->


    <!--==================================  STUDY   ===========================================
-->
    <bean name="/study/create" id="createStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.CreateStudyController" />
    <bean name="/study/view" id="viewStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.ViewStudyController"  />
    <bean name="/study/search" id="searchStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.SearchStudyController">
        <property name="sessionForm" value="true"/>
        <property name="studyRepository" ref="studyRepository"/>
    </bean>
    <bean name="/study/searchAdEERSStudies" id="searchAdEERSStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.SearchAdEERSStudyController">
        <property name="sessionForm" value="true"/>
        <property name="studyRepository" ref="studyRepository"/>
    </bean>
    <bean name="/study/edit" id="editStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.EditStudyController" p:task-ref="studyEditTask" />
    <bean name="/study/studyAgentIND" id="studyAgentINDController" autowire="byType" class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>study/ajax/studyAgentINDSection</value></property>
    </bean>
    <bean name="/study/export" id="exportStudyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.study.ExportStudyController" /> 


    <!--  AE   -->
	
  <bean name="/ae/routingAndReview" id="routingAndReviewController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.RoutingAndReviewController"/>
  <bean name="/ae/listReviewComments" id="listReviewCommentsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.RoutingAndReviewCommentController" />
  <bean name="/ae/captureRoutine" id="captureAdverseEventController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.CaptureAdverseEventController"/>
  <bean name="/ae/createReportingPeriod" id="createReportingPeriodController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.CreateReportingPeriodController"/>
  
  <bean name="/ae/reviewEvaluationPeriod" id="reviewEvaluationPeriodController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.ReviewEvaluationPeriodController"/>
  <bean name="/ae/reviewAeReport" id="reviewAeReportController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.ReviewAeReportController" />
  <bean name="/ae/reviewResolver" id="reviewResolverController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.RoutingAndReviewResolverController"/>	
  <bean name="/ae/edit" id="editAdverseEventController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.EditAdverseEventController" p:task-ref="aeEditTask"/>
  <bean name="/ae/submitReport" id="submitReportController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.SubmitReportController"/>    
  <bean name="/ae/list" id="listAdverseEventsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.ListAdverseEventsController"/>
  <bean name="/ae/blankForm" id="generateBlankFormPdfController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.GenerateBlankFormPdfController"/>

  <bean name="/ae/generateExpeditedfPdf" id="generateExpeditedPdfController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.GenerateExpeditedPdfController"/>

  <bean name="/admin/configure" id="configurationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.ConfigurationController"/>
  <bean name="/admin/ctepesysDataImport" id="cTEPESYSDataImportController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.CTEPESYSDataImportController"/>
  <bean name="/admin/logdownload" id="cTEPDataIntegrationLogDownloadController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.CTEPDataIntegrationLogDownloadController"/>
  <bean name="/admin/trackReports" id="trackReportsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.ae.TrackReportsController"/>
  <bean name="/admin/ctepesysDataIntegrationLogs" id="ctepesysDataIntegrationLogsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.CTEPESYSDataIntegrationLogsController"/>
  <bean name="/admin/happy" id="diagnosticsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.DiagnosticsController">
	<property name="caaersJavaMailSender" ref="mailer"/>
	<property name="messageBroadcastService" ref="messageBroadcaster" />
  </bean>
	
  <bean name="/admin/passwordPolicyConfigure" id="passwordPolicyConfigurationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.PasswordPolicyConfigurationController">
    <property name="validator" ref="numInRangeValidator"/>
  </bean>
  
  <bean name="/admin/mandatoryFields" id="mandatoryFieldsController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.MandatoryFieldsController">
  	<property name="caaersFieldsTree" ref="caaersFieldsTree"></property>
  	<property name="caaersFieldConfigurationManager" ref="caaersFieldConfigurationManager"></property>
  </bean>

  <bean name="/admin/createOrganization" id="createOrganizationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.CreateOrganizationController">
    <property name="sessionForm"><value>true</value></property>
    <property name="webControllerValidator" ref="webControllerValidator"/>
  </bean>
  
  <bean name="/admin/editOrganization" id="editOrganizationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.EditOrganizationController">
    <property name="webControllerValidator" ref="webControllerValidator"/>
  </bean>

  <bean name="/admin/searchOrganization" id="searchOrganizationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.search.SearchOrganizationController" />

  <bean name="/admin/import" id="importController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.ImportController" />
  <bean name="/admin/importMeddra" id="importMeddraController" autowire="byName" class="gov.nih.nci.cabig.caaers.web.admin.ImportMeddraController" />

  <bean name="/admin/createIND" id="createINDController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.CreateINDController"/>
  <bean name="/admin/searchIND" id="searchINDController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.search.SearchINDController"/>
  
  <bean name="/participant/search" id="searchParticipantController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.search.SearchParticipantController"/>


  <bean name="/search/listSearch" id="listSearchController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.search.ListSearchController"/>
  
  <bean name="/search/advancedSearch" id="advancedSearchController" autowire="byType" 	class="gov.nih.nci.cabig.caaers.web.search.AdvancedSearchController"/>

  <bean name="/search/exportSearchResults" id="exportSearchResultsController" autowire="byType"  class="gov.nih.nci.cabig.caaers.web.search.ExportSearchResultsController"/>
  <!--
  <bean name="/help" id="helpController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/ae/notImplemented" id="aesNotImplementedController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/study/notImplemented" id="studiesNotImplementedController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/participant/notImplemented" id="participantsNotImplementedController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/report/notImplemented" id="reportsNotImplementedController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/admin/notImplemented" id="adminNotImplementedController" autowire="byType"
	class="org.springframework.web.servlet.mvc.ParameterizableViewController">
    <property name="viewName"><value>standardNotImplemented</value></property>
  </bean>

  <bean name="/ae/sample" autowire="byType" class="gov.nih.nci.cabig.caaers.web.SampleController"/>
  -->

  <bean name="/rule/export" id="exportRuleController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.author.ExportRuleController"></bean>
  <bean name="/rule/create" id="createRuleController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.author.CreateRuleController"></bean>
  <bean name="/rule/read" id="readRuleController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.author.CreateRuleController"></bean>
  <bean name="/rule/list" id="listRuleController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.author.ListRuleController"></bean>
  <bean name="/rule/util" id="ruleUtilController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.author.RuleUtilController"></bean>
  <bean name="/rule/addRule" id="addRuleController" autowire="byType" class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>rule/author/addRule</value></property>
  </bean>
  
  <bean name="/rule/createOptions" id="createOptionsController" autowire="byType" class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>rule/author/createOptions</value></property>
  </bean>

  <bean name="/rule/addColumn" id="addRuleConditionController" autowire="byType" class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName"><value>rule/author/addColumn</value></property>
  </bean>    

  
  <!-- TODO: to be removed -->
  <util:map id="roles" map-class="java.util.LinkedHashMap">
    <entry key="Site Study PI" value="Site Study PI" />
    <entry key="Study Chair" value="Study Chair" />
    <entry key="Reporter" value="Reporter" />
    <entry key="Treating Physician" value="Treating Physician" />
    <entry key="Sponsor" value="Sponsor" />
    <entry key="IRB" value="IRB" />	
  </util:map>

  <bean name="/rule/notification/create" id="createNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.CreateReportDefinitionController">
    <property name="roles" ref="roles" />
    <property name="caaersRulesEngineService" ref="caaersRulesEngineService" />
  </bean>
  
    <bean name="/rule/notification/edit" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.EditReportDefinitionController">
        <property name="roles" ref="roles" />
        <property name="caaersRulesEngineService" ref="caaersRulesEngineService" />
    </bean>
  
    <bean name="/rule/notification/list" id="listNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.ListNotificationController" />

    <bean name="/rule/notification/export" id="exportReportDefinitionController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.ExportReportDefinitionController" />
    <bean name="/rule/notification/import" id="importReportDefinitionController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.ImportReportDefinitionController" />
    <bean name="/rule/notification/createConfigProperty" id="createConfigPropertyController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.notification.CreateConfigPropertyController" />

    <bean name="/rule/safetyNotificationList" id="listSafetyNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.ListSafetyNotificationController" />
    <bean name="/rule/createSafetyNotifiction" id="createSafetyNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.CreateSafetyNotificationController">
        <property name="roles" ref="roles" />
        <property name="notificationDao" ref="notificationDao" />
    </bean>
    <bean name="/rule/editSafetyNotifiction" id="editSafetyNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.EditSafetyNotificationController">
        <property name="roles" ref="roles" />
        <property name="notificationDao" ref="notificationDao" />
    </bean>
    <bean name="/rule/exportSafetyNotifiction" id="exportSafetyNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.ExportSafetyNoficationController" />
    <bean name="/rule/importSafetyNotifiction" id="importSafetyNotificationController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.rule.ImportSafetyNoficationController" />

    <bean name="/admin/reload" id="messageReload" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.MessageReloadController">
        <property name="messageSource" ref="messageSource" />
        <property name="caaersFieldsTree" ref="caaersFieldsTree" />
    </bean>

    <bean name="/admin/asaelSearch" id="asaelSearchController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.AgentSearchController" />
    <bean name="/admin/asaelCreate" id="asaelCreateController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.AgentCreateController" />
    <bean name="/admin/asaelEdit" id="asaelEditController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.AgentEditController" />

    <bean name="/admin/deviceSearch" id="deviceSearchController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.DeviceSearchController" />
    <bean name="/admin/deviceCreate" id="deviceCreateController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.DeviceCreateController" />
    <bean name="/admin/deviceEdit" id="deviceEditController" autowire="byType" class="gov.nih.nci.cabig.caaers.web.admin.DeviceEditController" />

    <!-- DASHBOARD CONTROLLERS -->
    <bean name="/dashboard/aeReporter" id="aeReporterDashboard" class="gov.nih.nci.cabig.caaers.web.dashboard.AEReporterDashboardController" autowire="byType" />
    <bean name="/dashboard/study" id="studyDashboard" class="gov.nih.nci.cabig.caaers.web.dashboard.StudyDashboardController" autowire="byType" />
    <bean name="/dashboard/routingAndReview" id="rountinAndReviewDashboard" class="gov.nih.nci.cabig.caaers.web.dashboard.RoutingAndReviewDashboardController" autowire="byType" />
    <bean name="/dashboard/subject" id="subjectDashboard" class="gov.nih.nci.cabig.caaers.web.dashboard.SubjectDashboardController" autowire="byType" />
    <bean name="/dashboard/users" id="usersDashboard" class="gov.nih.nci.cabig.caaers.web.dashboard.UsersDashboardController" autowire="byType" />

    <!-- DASHBOARD CONTROLLERS -->

	<bean name="/admin/createUser" id="createUserController" class="gov.nih.nci.cabig.caaers.web.admin.CreateUserController" autowire="byType">
		<property name="caaersSecurityFacade" ref="caaersSecurityFacade" />
		<property name="proSessionFactory" ref="provisioningSessionFactory" />
		<property name="userRepository" ref="userRepository" />
		<property name="personRepository" ref="personRepository" />
	</bean>
	
	<bean name="/admin/editUser" id="editUserController" class="gov.nih.nci.cabig.caaers.web.admin.EditUserController" autowire="byType">
		<property name="caaersSecurityFacade" ref="caaersSecurityFacade" />
		<property name="proSessionFactory" ref="provisioningSessionFactory" />
		<property name="organizationRepository" ref="organizationRepository" />
		<property name="studyRepository" ref="studyRepository" />
		<property name="userRepository" ref="userRepository" />
		<property name="personRepository" ref="personRepository" />
	</bean>

	<bean name="/admin/searchUser"  id="userSearchController" class="gov.nih.nci.cabig.caaers.web.search.SearchUserController"/>    



</beans>
