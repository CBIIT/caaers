<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="caAERS Participant Data Driven" resourceRoot="" soapui-version="5.1.3" abortOnError="false" runType="SEQUENTIAL" id="d37cb3a4-60ad-40b6-a351-d3e428a41b88" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="b366e9bd-d8c7-4563-8e0e-c8e88e8e1b0b" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://dev.semanticbits.com" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://dev.semanticbits.com</con:endpoint></con:endpoints><con:resource name="ParticipantInitialization" path="/caaers/ParticipantInitialization" id="126b9074-75dd-46e6-a42a-9f8ca1fb0982"><con:settings/><con:parameters/><con:method name="ParticipantInitialization" id="11e3e62f-e566-4857-b411-3c25289aa43c" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>text/xml</con:mediaType><con:params/><con:element xmlns:v1="http://www.cdisc.org/ns/odm/v1.3">v1:ODM</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="5cc715eb-5bfb-4bf7-a887-49bb857343c6" mediaType="text/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://dev.semanticbits.com</con:endpoint><con:request><![CDATA[<ODM CreationDateTime="2013-04-17T13:06:03" FileOID="RavePatientPush.xml" FileType="Transactional" ODMVersion="1.3" xmlns="http://www.cdisc.org/ns/odm/v1.3" xmlns:mdsol="http://www.mdsol.com/ns/odm/metadata">
   <ClinicalData MetaDataVersionOID="3629771" StudyOID="A071102">
      <SubjectData SubjectKey="S34-A071102" TransactionType="Insert">
         <SiteRef LocationOID="CTSUTST01"/>
         <StudyEventData StudyEventOID="SUBJECT" TransactionType="Update">
            <FormData FormOID="SUBJECT_ENROLLMENT" TransactionType="Update">
               <ItemGroupData ItemGroupOID="SUBJECT_ENROLLMENT" TransactionType="Update">
                  <ItemData ItemOID="PARTIC_ENROL_DT" Value="17 Apr 2013"></ItemData>
                  <ItemData ItemOID="CURRENT_SITE_ID" Value="MN008"></ItemData>
                  <ItemData ItemOID="PT_ID" Value="S34-A071102"></ItemData>
                  <ItemData ItemOID="ENROLLING_SITE_ID" Value="MN008"></ItemData>
                  <ItemData ItemOID="LEAD_INST_NAME" Value="SWOG"></ItemData>
                  <ItemData ItemOID="ENROLL_TIME" Value="01:04:20:PM">
                     <MeasurementUnitRef MeasurementUnitOID="EDT"/>
                  </ItemData>
                  <ItemData ItemOID="GROUP_DATA" Value="N/A"></ItemData>
                  <ItemData ItemOID="SRC_APP" Value="OPEN"></ItemData>
               </ItemGroupData>
            </FormData>
         </StudyEventData>
         <StudyEventData StudyEventOID="ENROLLMENT_FORMS" TransactionType="Update">
            <FormData FormOID="DEMOGRAPHY" TransactionType="Update">
               <ItemGroupData ItemGroupOID="DEMOGRAPHY" TransactionType="Update">
                  <ItemData ItemOID="PT_INITIALS_NAME" Value="LFM"></ItemData>
                  <ItemData ItemOID="PER_BIR_DT" Value="13 Jan 1961"></ItemData>
                  <ItemData ItemOID="ETHN_GRP_CAT_TXT" Value="Not Reported"></ItemData>
                  <ItemData ItemOID="PERSON_GENDER" Value="Unknown"></ItemData>
                  <ItemData ItemOID="COUNTRY_CD" Value="US"></ItemData>
                  <ItemData ItemOID="ADDR_POSTAL_CD" Value="56711"></ItemData>
                  <ItemData ItemOID="PAYMENT_METHOD" Value="PRIVATE INSURANCE"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="DEMOGRAPHY" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="RACE_CAT_TXT" Value="Not Reported"></ItemData>
               </ItemGroupData>
            <!--   <ItemGroupData ItemGroupOID="DEMOGRAPHY" ItemGroupRepeatKey="2" TransactionType="Insert">
                  <ItemData ItemOID="RACE_CAT_TXT" Value="Unknown"></ItemData>
               </ItemGroupData> -->
            </FormData>
         </StudyEventData>
         <StudyEventData StudyEventOID="ENROLLMENT_FORMS" TransactionType="Update">
            <FormData FormOID="STEP_INFORMATION" TransactionType="Update">
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_DATE" Value="17 Apr 2013"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="REG_STEP_NUM" Value="1"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_DESC" Value="Randomization"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_TIME" Value="01:04:20:PM">
                     <MeasurementUnitRef MeasurementUnitOID="EDT"/>
                  </ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="TRACKING_NUM" Value="110347"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="TX_MD_PART_INV_NM" Value="Elizabeth Poplin"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="PROT_REG_NAME" Value="David Gorski"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="INVESTIGATOR_NAME" Value="Paul Rosenthal"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="ORG_NAME" Value="SWOG"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="PROT_TX_ARM_ASS_TXT" Value="Blinded"></ItemData>
               </ItemGroupData>
            </FormData>
         </StudyEventData>
      </SubjectData>
   </ClinicalData>
</ODM>]]></con:request><con:originalUri>https://dev.semanticbits.com/caaers/ParticipantInitialization</con:originalUri><con:credentials><con:username>registrar</con:username><con:password>rartsigermai-11</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="Data Driven" id="ff7aab02-d58b-4ccf-a91a-3a04629553c8"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Data Driven" searchProperties="true" id="9824c379-6c54-435e-85d8-51c7868e2415"><con:settings/><con:testStep type="restrequest" name="Create Participant" id="ec762846-2cbc-4235-9385-c1264214df52"><con:settings/><con:config service="https://dev.semanticbits.com" methodName="ParticipantInitialization" resourcePath="/caaers/ParticipantInitialization" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Create Participant" id="eb427498-b9fa-4b27-acea-b7e4bfdd48d3" mediaType="text/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.semanticbits.com</con:endpoint><con:request><![CDATA[<ODM CreationDateTime="2013-04-17T13:06:03" FileOID="RavePatientPush.xml" FileType="Transactional" ODMVersion="1.3" xmlns="http://www.cdisc.org/ns/odm/v1.3" xmlns:mdsol="http://www.mdsol.com/ns/odm/metadata">
   <ClinicalData MetaDataVersionOID="3629771" StudyOID="${#TestCase#Study}">
      <SubjectData SubjectKey="${#TestCase#SubjectKey}" TransactionType="Insert">
         <SiteRef LocationOID="${#TestCase#Site}"/>
         <StudyEventData StudyEventOID="SUBJECT" TransactionType="Update">
            <FormData FormOID="SUBJECT_ENROLLMENT" TransactionType="Update">
               <ItemGroupData ItemGroupOID="SUBJECT_ENROLLMENT" TransactionType="Update">
                  <ItemData ItemOID="PARTIC_ENROL_DT" Value="${#TestCase#EnrollmentDate}"></ItemData>
                  <ItemData ItemOID="CURRENT_SITE_ID" Value="${#TestCase#CurrentSite}"></ItemData>
                  <ItemData ItemOID="PT_ID" Value="${#TestCase#ParticipantId}"></ItemData>
                  <ItemData ItemOID="ENROLLING_SITE_ID" Value="${#TestCase#EnrollingSite}"></ItemData>
                  <ItemData ItemOID="LEAD_INST_NAME" Value="${#TestCase#LeadSite}"></ItemData>
                  <ItemData ItemOID="ENROLL_TIME" Value="${#TestCase#EnrollmentTime}">
                     <MeasurementUnitRef MeasurementUnitOID="EDT"/>
                  </ItemData>
                  <ItemData ItemOID="GROUP_DATA" Value="N/A"></ItemData>
                  <ItemData ItemOID="SRC_APP" Value="OPEN"></ItemData>
               </ItemGroupData>
            </FormData>
         </StudyEventData>
         <StudyEventData StudyEventOID="ENROLLMENT_FORMS" TransactionType="Update">
            <FormData FormOID="DEMOGRAPHY" TransactionType="Update">
               <ItemGroupData ItemGroupOID="DEMOGRAPHY" TransactionType="Update">
                  <ItemData ItemOID="PT_INITIALS_NAME" Value="${#TestCase#Initials}"></ItemData>
                  <ItemData ItemOID="PER_BIR_DT" Value="${#TestCase#Birth}"></ItemData>
                  <ItemData ItemOID="ETHN_GRP_CAT_TXT" Value="${#TestCase#Ethnicity}"></ItemData>
                  <ItemData ItemOID="PERSON_GENDER" Value="${#TestCase#Gender}"></ItemData>
                  <ItemData ItemOID="COUNTRY_CD" Value="${#TestCase#Country}"></ItemData>
                  <ItemData ItemOID="ADDR_POSTAL_CD" Value="${#TestCase#Zipcode}"></ItemData>
                  <ItemData ItemOID="PAYMENT_METHOD" Value="${#TestCase#Payment}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="DEMOGRAPHY" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="RACE_CAT_TXT" Value="${#TestCase#Race}"></ItemData>
               </ItemGroupData>
            </FormData>
         </StudyEventData>
         <StudyEventData StudyEventOID="ENROLLMENT_FORMS" TransactionType="Update">
            <FormData FormOID="STEP_INFORMATION" TransactionType="Update">
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_DATE" Value="${#TestCase#EnrollmentDate}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="REG_STEP_NUM" Value="1"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_DESC" Value="Randomization"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="EVENT_TIME" Value="${#TestCase#EnrollmentTime}">
                     <MeasurementUnitRef MeasurementUnitOID="EDT"/>
                  </ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="TRACKING_NUM" Value="${#TestCase#TrackingNumber}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="TX_MD_PART_INV_NM" Value="${#TestCase#Physician}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="PROT_REG_NAME" Value="${#TestCase#Registrar}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="INVESTIGATOR_NAME" Value="${#TestCase#Investigator}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="ORG_NAME" Value="${#TestCase#LeadSite}"></ItemData>
               </ItemGroupData>
               <ItemGroupData ItemGroupOID="STEP_INFORMATION" ItemGroupRepeatKey="1" TransactionType="Update">
                  <ItemData ItemOID="PROT_TX_ARM_ASS_TXT" Value="${#TestCase#Assessment}"></ItemData>
               </ItemGroupData>
            </FormData>
         </StudyEventData>
      </SubjectData>
   </ClinicalData>
</ODM>]]></con:request><con:originalUri>https://dev.semanticbits.com/caaers/ParticipantInitialization</con:originalUri><con:assertion type="Simple Contains" id="6c69d5af-d633-444f-ad24-1eb23d8cd872" name="Contains"><con:configuration><token>IsTransactionSuccessful="${#TestCase#Success}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>registrar</con:username><con:password>rartsigermai-11</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Next Line" id="124f800e-f2d0-416a-accf-bdc55c59a897"><con:settings/><con:config><script>// ${#TestCase#ColHeader}
testCase = testRunner.testCase;

line = context.fileReader.readLine()
log.info "Read line: " + line

if (line != null) {
	String[] props = line.split(",")
	
	for (int i = 0; i &lt; props.length &amp;&amp; i &lt; context.headers.length; i++) {
		log.info "Found property: " + context.headers[i] + "=" + props[i]
		testCase.setPropertyValue(context.headers[i],props[i])
	}

	// loop
	testRunner.gotoStep(0)
}
</script></con:config></con:testStep><con:setupScript>testCase = testRunner.testCase;
file = testCase.getPropertyValue("file")

log.info "Data Driven: reading from " + file

// open a file reader in context.filereader
context.fileReader = new BufferedReader(new FileReader(file))

// read headers into context.headers and trim them
line = context.fileReader.readLine()
if (line != null) {
	context.headers = line.split(",")
	
	for (int i = 0; i &lt; context.headers.length; i++) {
		context.headers[i] = context.headers[i].trim()
		log.info "Found header: " + context.headers[i]
	}
}

// read first line
line = context.fileReader.readLine()
log.info "Read line: " + line

if (line != null) {
	String[] props = line.split(",")

	log.info "Found properties: " + props.length
	log.info "Using headers: " + context.headers.length
	for (int i = 0; i &lt; props.length &amp;&amp; i &lt; context.headers.length; i++) {
		log.info "Found property: " + context.headers[i] + "=" + props[i]
		testCase.setPropertyValue(context.headers[i],props[i])
	}
}</con:setupScript><con:tearDownScript>context.fileReader.close()</con:tearDownScript><con:properties><con:property><con:name>file</con:name><con:value>/Users/mccon012/Downloads/caAERS Participant Data Driven - Participant Data.csv</con:value></con:property><con:property><con:name>Ethnicity</con:name><con:value>Hispanic or Latino</con:value></con:property><con:property><con:name>Gender</con:name><con:value>Female Gender</con:value></con:property><con:property><con:name>Race</con:name><con:value>American Indian or Alaska Native</con:value></con:property><con:property><con:name>Success</con:name><con:value>0</con:value></con:property><con:property><con:name>SubjectKey</con:name><con:value>S16791197-A071102</con:value></con:property><con:property><con:name>Site</con:name><con:value>CTSUTST01</con:value></con:property><con:property><con:name>Study</con:name><con:value>A071102</con:value></con:property><con:property><con:name>EnrollmentDate</con:name><con:value>14 Jun 2011</con:value></con:property><con:property><con:name>CurrentSite</con:name><con:value>MN008</con:value></con:property><con:property><con:name>ParticipantId</con:name><con:value>S16791197-A071102</con:value></con:property><con:property><con:name>EnrollingSite</con:name><con:value>MN008</con:value></con:property><con:property><con:name>LeadSite</con:name><con:value>SWOG</con:value></con:property><con:property><con:name>EnrollmentTime</con:name><con:value>08:09:27:PM</con:value></con:property><con:property><con:name>Initials</con:name><con:value>"</con:value></con:property><con:property><con:name>Birth</con:name><con:value/></con:property><con:property><con:name>Country</con:name><con:value/></con:property><con:property><con:name>Zipcode</con:name><con:value>"</con:value></con:property><con:property><con:name>Payment</con:name><con:value>14 Jun 2011</con:value></con:property><con:property><con:name>TrackingNumber</con:name><con:value>US</con:value></con:property><con:property><con:name>Physician</con:name><con:value>22222</con:value></con:property><con:property><con:name>Registrar</con:name><con:value>PRIVATE INSURANCE</con:value></con:property><con:property><con:name>Investigator</con:name><con:value>110347</con:value></con:property><con:property><con:name>Assessment</con:name><con:value>Elizabeth Poplin</con:value></con:property><con:property><con:name>Note</con:name><con:value>David Gorski</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer><con:outgoing><con:name>caaers</con:name><con:entry type="Username" username="mayo-super-user" password="Hello-12"><con:configuration><addCreated>true</addCreated><addNonce>true</addNonce><passwordType>PasswordText</passwordType></con:configuration></con:entry></con:outgoing><con:outgoing><con:name>caaers-integ</con:name><con:entry type="Username" username="sb-admin" password="Hello-12"><con:configuration><addCreated>true</addCreated><addNonce>true</addNonce><passwordType>PasswordText</passwordType></con:configuration></con:entry></con:outgoing></con:wssContainer><con:oAuth2ProfileContainer/><con:sensitiveInformation/></con:soapui-project>