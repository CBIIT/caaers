<project name="AdverseEventEnterpriseService" basedir=".">
	<property name="parent.dir" value="${basedir}/../../.." />
	<property file="${parent.dir}/build.properties" />
    <property file="${parent.dir}/grid/build.properties" />
	<import file="${parent.dir}/common.xml"/>


	<target name="publish-local" depends="clean,resolve, external-build, publish-local-external-jar" description="-->Will build and deploy the AdverseEventConsumer">

	</target>
	<target name="publish" depends="clean,resolve,external-build,publish-external-jar" description="--> Will build and deploy the AdverseEventConsumer">

	</target>

	<target name="external-build" description="Will build the grid service using introduce generated build file">
			<!-- I am not sure, whether deployTomcat is the right target -->
		<ant antfile="${basedir}/build.xml" target="all" inheritall="false" inheritrefs="true" dir="${basedir}"/>
	</target>

	<target name="publish-local-external-jar"
            description="Will publish the jars generated by the external introduce build">
        <tstamp>
			<format property="now" pattern="yyyyMMddHHmmss"/>
			<format property="today" pattern="yyyy-MM-dd hh:mm:ss.mmm" />
		</tstamp>
        <property name="version" value="${caaers.ae.safety.service.version}-local-${now}" />
        <ivyPublish artifactspattern="${dist.dir}/[artifact].[ext]"
				    		resolver="caaers-local"
				    		pubrevision="${version}"
				    		status="integration"
				    		/>
	</target>

	<target name="publish-external-jar"
            description="Will publish the jar generated by the external introduce to a public repository">
        <property name="version" value="${caaers.ae.safety.service.version}" />
        <ivyPublish artifactspattern="${dist.dir}/[artifact].[ext]"
				    		resolver="semanticbits-repo-sftp"
				    		pubrevision="${version}"
				    		status="release"
				    		/>
		<echo message="project ${ant.project.name} released with version ${version}" />
	</target>

	<target name="resolve" depends="load-ivy,init" description="Will resolve the dependencies">
		<!-- resolve the dependencies -->
		<ivyResolve confs="build" libdir="${lib.dir}" resolveid="[org]-[module]"/>
	</target>

	<target name="clean" description="Will clean using the existing build:clean task">
		<!-- Clean-->
		<ant antfile="${basedir}/build.xml" target="clean" />
	</target>




</project>